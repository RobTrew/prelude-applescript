{
  "title": "transpose",
  "cells": [
    {
      "type": "code",
      "language": "applescript",
      "data": "-- If some of the rows are shorter than the following rows, \n-- their elements are skipped:\n-- transpose({{10,11},{20},{},{30,31,32}}) -> {{10, 20, 30}, {11, 31}, {32}}"
    },
    {
      "type": "code",
      "language": "applescript",
      "data": "-- transpose :: [[a]] -> [[a]]\non transpose(xxs)\n    set intMax to |length|(maximumBy(comparing(my |length|), xxs))\n    set gaps to replicate(intMax, {})\n    script padded\n        on |λ|(xs)\n            set lng to |length|(xs)\n            if lng < intMax then\n                xs & items (lng + 1) thru -1 of gaps\n            else\n                xs\n            end if\n        end |λ|\n    end script\n    set rows to map(padded, xxs)\n    \n    script cols\n        on |λ|(_, iCol)\n            script cell\n                on |λ|(row)\n                    item iCol of row\n                end |λ|\n            end script\n            concatMap(cell, rows)\n        end |λ|\n    end script\n    map(cols, item 1 of rows)\nend transpose"
    }
  ]
}