{
  "title": "appendFileMay",
  "cells": [
    {
      "type": "code",
      "language": "applescript",
      "data": "-- Write a string to the end of a file. \n-- Returns a Just FilePath value if the \n-- path exists and the write succeeded. \n-- Otherwise returns Nothing."
    },
    {
      "type": "code",
      "language": "applescript",
      "data": "-- appendFileMay :: FilePath -> String -> Maybe IO FilePath\non appendFileMay(strPath, txt)\n    set ca to current application\n    set oFullPath to (ca's NSString's stringWithString:strPath)'s ¬\n        stringByStandardizingPath\n    set strFullPath to oFullPath as string\n    set {blnExists, intFolder} to (ca's NSFileManager's defaultManager()'s ¬\n        fileExistsAtPath:oFullPath isDirectory:(reference))\n    if blnExists then\n        if 0 = intFolder then -- Not a directory\n            set oData to (ca's NSString's stringWithString:txt)'s ¬\n                dataUsingEncoding:(ca's NSUTF8StringEncoding)\n            set h to ca's NSFileHandle's fileHandleForWritingAtPath:oFullPath\n            h's seekToEndOfFile\n            h's writeData:oData\n            h's closeFile()\n            Just(strFullPath)\n        else\n            Nothing()\n        end if\n    else\n        if doesDirectoryExist(takeDirectory(strFullPath)) then\n            writeFile(oFullPath, txt)\n            Just(strFullPath)\n        else\n            Nothing()\n        end if\n    end if\nend appendFileMay"
    }
  ]
}