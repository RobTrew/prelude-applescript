{
  "title": "evalJSMay",
  "cells": [
    {
      "type": "code",
      "language": "applescript",
      "data": "-- use framework \"Foundation\"\n-- use framework \"JavaScriptCore\"\n\n-- gJSC can be declared in the global namespace,\n-- but unless the reference is released before the \n-- end of the script (e.g. `set gJSC to null`)\n-- it will persist, and\n-- Script Editor will be unable to save a .scpt file"
    },
    {
      "type": "code",
      "language": "applescript",
      "data": "-- evalJSMay :: String -> Maybe a\non evalJSMay(strJS)\n    try -- NB if gJSC is global it must be released \n        -- (e.g. set to null) at end of script\n        gJSC's evaluateScript\n    on error\n        set gJSC to current application's JSContext's new()\n        log (\"new JSC\")\n    end try\n    set v to unwrap((gJSC's evaluateScript:(strJS))'s toObject())\n    if v is missing value then\n        Nothing()\n    else\n        Just(v)\n    end if\nend evalJSMay"
    }
  ]
}